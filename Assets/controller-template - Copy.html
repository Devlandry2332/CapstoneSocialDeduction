
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Game Title</title>
  <script src="https://www.airconsole.com/api/airconsole-1.7.0.js"></script>
  <style>
    /* CSS styles */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f0f0f0;
    }
    .container {
      max-width: 100%;
      padding: 10px;
    }
    .button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      font-size: 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .button:hover {
      background-color: #45a049;
    }
    .message {
      margin-top: 10px;
      font-size: 18px;
      color: red;
      text-align: center;
    }
  </style>
  <script>
    // JavaScript code
    var airconsole;

    function App() {
      airconsole = new AirConsole({"orientation": "portrait"});

      airconsole.onMessage = function (device_id, data) {
        if (data.action) {
          switch (data.action) {
            case "assignRole":
              document.getElementById('roleDisplay').innerText = "Your Role: " + data.role;
              document.getElementById('roleDisplay').style.display = 'block';
              break;
            case "Reset":
              document.getElementById('roleDisplay').style.display = 'none';
              // handle other actions as previously
              break;
            case "chooseGameMode":
              displayGameModeChoices();
              break;
            case "wait":
              displayWaitMessage("Please wait for the game mode selection...");
              break;
            case "hideGameModeSelection":
              hideGameModeSelection();
              break;
            case "startVoting":
              displayVotingOptions(data.players, data.currentPlayerId);
              break;
            case "hideVoting":
              hideVotingOptions();
              break;
          }
        }

        document.getElementById('takeControl').style.display = 'none';
        if (data == "TakenControl") {
          document.getElementById('send').style.display = 'inline';
        }
        if (data == "Reset") {
          document.getElementById('send').style.display = 'inline';
          document.getElementById('parentNode').remove();
        }
        if (data == "Sent") {
          document.getElementById('send').style.display = 'none';
        }
        if (data == "Voted") {
          document.getElementById('parentNode').remove();
        }
        if (data == "SetupRound") {
          var parentNode = document.createElement("p");
          parentNode.id = "parentNode";
          var body = document.getElementsByTagName("body")[0];
          body.appendChild(parentNode);
        }
        if (data != "Reset" && data != "TakenControl" && data != "Sent" && data != "ControlTaken" && data != "SetupRound" && data != "Voted") {
          var button = document.createElement("button");
          button.id = data;
          button.innerHTML = data;
          button.parentNode = document.getElementById("parentNode");

          var parentNode = document.getElementById("parentNode");
          parentNode.appendChild(button);

          button.addEventListener("click", function () {
            airconsole.message(AirConsole.SCREEN, {"vote": data});
          });
        }
      };

      if (!("ontouchstart" in document.createElement("div"))) {
        var elements = document.getElementsByTagName("*");
        for (var i = 0; i < elements.length; ++i) {
          var element = elements[i];
          var ontouchstart = element.getAttribute("ontouchstart");
          if (ontouchstart) {
            element.setAttribute("onmousedown", ontouchstart);
          }
          var ontouchend = element.getAttribute("ontouchend");
          if (ontouchend) {
            element.setAttribute("onmouseup", ontouchend);
          }
        }
      }
    }

    App.prototype.sendInputToScreen = function() {
      if (document.getElementById("input").value != "") {
        airconsole.message(AirConsole.SCREEN, {"input": document.getElementById("input").value});
      }
    }

    App.prototype.sendMessageToScreen = function(msg) {
      airconsole.message(AirConsole.SCREEN, {"action": msg});
    }

    App.prototype.onFromDevice = function(device_id, data) {
      airconsole.message(AirConsole.SCREEN, {"action": data});
    };

    function displayGameModeChoices() {
      var gameModes = ['Truth and Lies', 'Find the Leader', 'Silent Assassin', 'Last Stand'];
      var container = document.getElementById('game-mode-container');
      container.innerHTML = '';
      gameModes.forEach(function (mode, index) {
        var button = document.createElement('button');
        button.textContent = mode;
        button.onclick = function () {
          airconsole.message(AirConsole.SCREEN, { action: "gameModeSelected", mode: index });
        };
        container.appendChild(button);
      });
      container.style.display = 'block';
    }

    function displayWaitMessage(message) {
      var messageDiv = document.getElementById('message');
      messageDiv.textContent = message;
      messageDiv.style.display = 'block';
      document.getElementById('game-mode-container').style.display = 'none';
    }

    function hideGameModeSelection() {
      var container = document.getElementById('game-mode-container');
      container.style.display = 'none';
      var messageDiv = document.getElementById('message');
      messageDiv.style.display = 'none';
    }

    function displayVotingOptions(players, currentPlayerId) {
      var votingContainer = document.getElementById('voting-container');
      votingContainer.innerHTML = '';
      players.forEach(function (player) {
        if (player.id !== currentPlayerId) {
          var voteButton = document.createElement('button');
          voteButton.textContent = 'Vote for ' + player.name;
          voteButton.onclick = function () {
            airconsole.message(AirConsole.SCREEN, { action: "vote", votedPlayerId: player.id });
            hideVotingOptions();
          };
          votingContainer.appendChild(voteButton);
        }
      });

      votingContainer.style.display = 'block';
    }

    function hideVotingOptions() {
      var votingContainer = document.getElementById('voting-container');
      votingContainer.style.display = 'none';
    }
  </script>
</head>
<body onload="new App()">
  <!-- HTML elements -->
  <div class="container">
    <div id="roleDisplay" style="display:none;"></div>
    <div id="game-mode-container" style="display: none;"></div>
    <div id="message" class="message" style="display: none;"></div>
    <div id="voting-container" style="display: none;"></div>
    
  </div>
</body>
</html>

